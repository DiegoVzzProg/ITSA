<template>
    <a href="#card_section" id="a_card_section"
        class="flex fixed bottom-[10px] hover:text-white transition-all bg-[rgba(255,255,255,0.26)] hover:bg-[rgb(0,0,0)] hover:border-[rgb(0,0,0)] right-[10px] max-[768px]:left-1/2 max-[768px]:-translate-x-1/2 rounded-full border border-black px-6 py-4 z-[9999]">
        get this pack!
    </a>
    <div id="overflow"
        class="after:content-[' '] after:bg-black after:opacity-0 after:z-10 after:absolute after:w-full after:h-full after:top-0 after:left-0 after:transition-all after:duration-500 bg-[rgba(116,179,253,0.66)] abtransition-all duration-500 absolute w-full top-0 left-0 z-0">
        <div class="min-h-screen"></div>
        <div class="min-h-screen"></div>
    </div>
    <div class="flex flex-col w-full">
        <div class="min-h-screen"></div>
        <div class="min-h-screen"></div>
    </div>
    <div
        class="flex flex-col min-h-screen scroll-section overflow-hidden absolute w-full grow shrink-0 top-0 left-0 transition-all duration-500">
        <div class="w-full h-screen flex justify-center items-center z-20">
            <div id="children_elemento1_scroll" class="flex flex-col w-full justify-center items-center">
                <p
                    class="font-itsa-bold text-[clamp(45px,10vw,208px)] leading-[clamp(30px,7vw,130px)] flex text-white z-10">
                    universal <br> icon pack
                </p>
                <p class="text-[clamp(1em,3vw,2em)] text-center text-white times-new-roman-font">
                    a essential collection solid <br /> & minimalist style icons
                </p>
            </div>
        </div>
        <div class="w-full h-screen flex justify-center items-center z-20">
            <div id="children_elemento2_scroll" class="flex flex-col w-full justify-center items-center">
                <p
                    class="font-itsa-bold text-[clamp(25px,7vw,208px)] leading-[clamp(0px,10vw,150px)] font-bold flex text-white z-10">
                    +500 elements
                </p>
                <p
                    class="font-itsa-bold text-[clamp(25px,7vw,208px)] leading-[clamp(0px,10vw,150px)] text-center font-bold flex text-white z-10">
                    fully editable
                </p>
                <p
                    class="font-itsa-bold text-[clamp(25px,7vw,208px)] leading-[clamp(0px,10vw,150px)] text-center font-bold flex text-white z-10">
                    personal & comercial use
                </p>
            </div>
        </div>
        <div class="w-full flex h-screen justify-center items-center absolute top-0 z-0 sticky-section">
            <div class="flex flex-row w-full justify-center  items-center">
                <div
                    class="flex flex-row justify-between px-[min(10px,50%)] w-full md:max-w-screen-xl max-[1090px]:justify-center items-center">
                    <File file="icon 1 color 2.png" class="w-full max-w-[300px] imagen-icon-1 max-[1090px]:hidden"
                        type="img" />
                    <File file="icon 2 color 2.png" class="w-full max-w-[500px] imagen-icon-1" type="img" />
                    <File file="icon 3 color 2.png" class="w-full max-w-[250px] imagen-icon-1 max-[1090px]:hidden"
                        type="img" />
                </div>
            </div>
        </div>
    </div>
    <div id="contenedor_gallery_basics"
        class="flex flex-col w-full min-h-screen grow shrink-0 px-[clamp(18px,5vw,68px)]">
        <div class="flex flex-col items-center justify-center w-full min-h-screen grow shrink-0">
            <p class="font-itsa-bold text-[clamp(40px,8vw,108px)]">universal icon</p>
            <p
                class="w-full text-center translate-y-[-30px] max-[520px]:translate-y-[-20px] py-1 text-[clamp(.8rem,3vw,1rem)] text-pretty">
                this plus pack consists of 500 essential icons in solid, forming an
                essential <br />
                collection fit for you personal and professional projects
            </p>
            <div class="flex rounded-[2em] w-full max-w-screen-md overflow-hidden">
                <File file="universalicon_02.png" type="img"></File>
            </div>
        </div>
        <div class="flex flex-row max-[680px]:flex-col-reverse w-full min-h-screen grow shrink-0">
            <div
                class="flex flex-col h-full w-full items-start max-[680px]:justify-start max-[680px]:items-center max-[680px]:text-center justify-center">
                <p class="font-itsa-bold text-[clamp(40px,8vw,108px)] leading-[100px]">
                    solid
                </p>
                <div class="flex flex-col">
                    <p class="flex w-full">
                        they are ready be used and will help <br />
                        you hive your new project a great look
                    </p>
                    <br />
                    <p>aviable as:illustrator, svg & pdf</p>
                </div>
                <div class="flex flex-row min-w-[300px] max-[680px]:min-w-[0px] max-[680px]:pt-5 pt-0 gap-4">
                    <File file="Ai.png" class="w-full max-w-[44px]" type="img">
                    </File>
                    <File file="SVG.png" class="w-full max-w-[34px]" type="img">
                    </File>
                    <File file="PDF.png" class="w-full max-w-[34px]" type="img">
                    </File>
                </div>
            </div>
            <div class="flex flex-col h-full w-full items-center justify-center">
                <div class="flex items-center justify-center rounded-[1em] w-full max-w-[532px] h-full max-h-[532px]">
                    <File file="universalicon_03.png" type="img">
                    </File>
                </div>
            </div>
        </div>
        <div class="min-h-screen justify-center items-center grow shrink-0 flex flex-col text-center">
            <p class="font-itsa-bold text-[clamp(3em,10vw,5.5em)]">524 items</p>
            <p class="text-[clamp(.8rem,3vw,1rem)] translate-y-[-30px] max-[520px]:translate-y-[-20px]">
                a large library of basic elements including <br />
                social media, weather, store and much more.
            </p>
            <div class="flex rounded-[1em] w-full justify-center overflow-hidden">
                <File file="video1-universal icon.gif" type="img">
                </File>
            </div>
        </div>
        <div class="min-h-screen justify-center items-center grow shrink-0 flex flex-col text-center">
            <p class="font-itsa-bold text-[clamp(3em,10vw,5.5em)]">
                print & digital use
            </p>
            <div class="flex w-full justify-center items-center translate-y-[-30px] max-[520px]:translate-y-[-20px]">
                <p class="text-[clamp(.8rem,3vw,1rem)] text-center w-full max-w-2xl">
                    all files are royalty-free and one time fee. you can use them in any
                    number of personal and commercial projects for yourself or a client
                    and you can do any ind of design work with them.
                </p>
            </div>
            <div class="flex rounded-[1em] w-full justify-center overflow-hidden">
                <File file="video2-universalicon.gif" type="img">
                </File>
            </div>
        </div>
        <div class="min-h-screen justify-center items-center grow shrink-0 flex flex-col text-center">
            <p class="font-itsa-bold text-[clamp(3em,10vw,5.5em)]">
                universal icon pack
            </p>
            <div class="flex w-full justify-center items-center translate-y-[-30px] max-[520px]:translate-y-[-20px]">
                <p class="text-[clamp(.8rem,3vw,1rem)] text-center w-full max-w-2xl">
                    all files are royalty-free and one time fee. you can use them in any
                    number of personal and commercial projects for yourself or a client
                    and you can do any ind of design work with them.
                </p>
            </div>
            <div class="flex rounded-[1em] w-full justify-center overflow-hidden">
                <File file="video3-universalicon.gif" type="img">
                </File>
            </div>
        </div>
        <div class="min-h-screen items-center justify-center grow shrink-0 flex flex-col" id="card_section"
            v-if="!site.IsNullOrEmpty(products)">
            <CardProduct :id_producto="2" titulo="get this pack" subtitulo="universal icon pack"
                descripcion="524 items <br/> available as: <br/> illustrator, figma, svg & pdf <br/> commercial & personal use"
                :precio="`${products.precio}`">
            </CardProduct>
        </div>
    </div>
</template>

<script setup lang="ts">
import { onMounted, onUnmounted, ref } from "vue";
import File from "../components/File.vue";
import CardProduct from "../components/CardProduct.vue";
import { site } from "../../../utils/site";
import { s_products } from "../services/s_products";
import { $v2 } from "../../../utils/JQueryV2";
import gsap from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';
const products: any = ref<any>(null);

onMounted(async () => {
    gsap.registerPlugin(ScrollTrigger);

    ScrollTrigger.create({
        trigger: ".sticky-section",
        start: "center center",
        end: "bottom top",
        pin: true,
        pinSpacing: false,
        snap: {
            snapTo: 1,
            delay: 0,
            duration: 1
        }
    });

    ScrollTrigger.create({
        trigger: ".scroll-section",
        start: "center center",
        end: "bottom top",
        pinSpacing: false,
        onToggle: (self) => {
            const overflow: any = document.querySelector("#overflow");
            if (self.isActive) {
                $v2(overflow).replaceClass("after:opacity-0", "after:opacity-30");
            } else {
                $v2(overflow).replaceClass("after:opacity-30", "after:opacity-0");
            }
        }
    });


    ScrollTrigger.create({
        trigger: ".scroll-section",
        start: "top center",
        end: "bottom top",
        pinSpacing: false,
        onToggle: (self) => {
            const header: any = document.querySelector("#header");
            if (self.isActive) {
                $v2(header).addStyle("background-color: transparent;");
            } else {
                $v2(header).addStyle("background-color: white;");
            }
        }
    });

    $v2("header").addStyle("background-color: transparent;");

    products.value = await s_products.listProducts({
        id_producto: 2,
    });
});

onUnmounted(() => {
    const triggers = ScrollTrigger.getAll();
    triggers.forEach(trigger => trigger.kill());
    $v2("header").addStyle("background-color: white;");
});

</script>

<style scoped></style>
